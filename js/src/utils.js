NexT.utils=NexT.$u={wrapImageWithFancyBox:function(){$('.content img').not('.group-picture img').each(function(){var $image=$(this);var imageTitle=$image.attr('title');var $imageWrapLink=$image.parent('a');if($imageWrapLink.size()<1){$imageWrapLink=$image.wrap('<a href="'+this.getAttribute('src')+'"></a>').parent('a');}$imageWrapLink.addClass('fancybox');$imageWrapLink.attr('rel','group');if(imageTitle){$imageWrapLink.append('<p class="image-caption">'+imageTitle+'</p>');$imageWrapLink.attr('title',imageTitle);}});$('.fancybox').fancybox({helpers:{overlay:{locked:false}}});},embeddedVideoTransformer:function(){var $iframes=$('iframe');var SUPPORTED_PLAYERS=['www.youtube.com','player.vimeo.com','player.youku.com','music.163.com','www.tudou.com'];var pattern=new RegExp(SUPPORTED_PLAYERS.join('|'));$iframes.each(function(){var iframe=this;var $iframe=$(this);if(this.src.search(pattern)>0){var videoRatio=($iframe.height()/$iframe.width())*100;if(this.src.search('music.163.com')>0){videoRatio+=10;}$iframe.width('100%').height('100%').css({position:'absolute',top:'0',left:'0'});var wrap=document.createElement('div');wrap.className='fluid-vids';wrap.style.width='100%';wrap.style.position='relative';wrap.style.paddingTop=videoRatio+'%';var iframeParent=iframe.parentNode;iframeParent.insertBefore(wrap,iframe);wrap.appendChild(iframe);}});},addActiveClassToMenuItem:function(){var path=window.location.pathname;path=path==='/'?path:path.substring(0,path.length-1);$('.menu-item a[href="'+path+'"]').parent().addClass('menu-item-active');},hasMobileUA:function(){var nav=window.navigator;var ua=nav.userAgent;var pa=/iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;return pa.test(ua);},isTablet:function(){return window.screen.width<992&&window.screen.width>767&&this.hasMobileUA();},isMobile:function(){return window.screen.width<767&&this.hasMobileUA();},isDesktop:function(){return!this.isTablet()&&!this.isMobile();},escapeSelector:function(selector){return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,'\\$&');},displaySidebar:function(){if(!this.isDesktop()){return;}$('.sidebar-toggle').trigger('click');},isMist:function(){return CONFIG.scheme==='Mist';},isPisces:function(){return CONFIG.scheme==='Pisces';}};